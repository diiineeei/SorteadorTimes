<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Sorteio de times</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel='manifest' href='https://diiineeei.github.io/SorteadorTimes/manifest.json'>
    <style>
        .jumbotron-heading {
                     padding-top: 20px;
                     padding-bottom: 20px;
                     margin-bottom: 0;
                     background-color: #fff;
                 }
    </style>
</head>
<body>
<script src="pwabuilder-sw.js">
    register();
</script>
<div class="container">
    <h1 class="text-center jumbotron-heading">Sorteador de Times 8:30</h1>
    <p class="lead text-muted">Meu sorteador é uma aplicação simples e eficiente projetada para ajudar a realizar sorteios de forma fácil e rápida. Ele foi desenvolvido para ser uma ferramenta prática e útil, permitindo que você sorteie equipes, prêmios ou qualquer outro tipo de seleção aleatória.</p>
</div>
</div>
<div class="container">
    <div class="row justify-content-center align-items-center">
        <div class="col-md-6">
            <textarea class="form-control" rows="6" id="listaJogadores"></textarea>
        </div>
    </div>
</div>
<div class="container" style="margin-top: 10px">
    <div class="row justify-content-center align-items-center">
        <div class="text-center col-md-3">
            <button class="btn btn-primary" onclick="jogadoresTextArea()">Sortear por Texto</button>
        </div>

        <div class="text-center col-md-3">
            <button class="btn btn-primary" onclick="sortearTimesAgora()">Sortear já cadastrados</button>
        </div>
    </div>
</div>

<div class="container-fluid ">
    <div class="row" id="teamsContainer">
        <!-- Aqui os times serão adicionados -->
    </div>
</div>

<style>
    .center-images {
        display: flex;
        justify-content: center;
    }

    .center-images .card {
        margin: 10px;
    }
</style>

<script>
    var jsonDataTextArea = [];
    var jsonData = [
        {
            "nome": "Rodinei",
            "imagem": "imagens/rodinei.png"
        },
        {
            "nome": "David",
            "imagem": "imagens/david.png"
        },
        {
            "nome": "Danilo",
            "imagem": "imagens/danilo.png"
        },
        {
            "nome": "Kelvin",
            "imagem": "imagens/kelvin.png"
        },
        {
            "nome": "Richard",
            "imagem": "imagens/richard.png"
        },
        {
            "nome": "Robson",
            "imagem": "imagens/robson.png"
        },
        {
            "nome": "Roger",
            "imagem": "imagens/roger.png"
        },
        {
            "nome": "Aluisio",
            "imagem": "imagens/aluisio.png"
        },
        {
            "nome": "Anderson",
            "imagem": "imagens/anderson.png"
        },
        {
            "nome": "Gustavo",
            "imagem": "imagens/default.png"
        },
        {
            "nome": "Leo",
            "imagem": "imagens/leo.png"
        },
        {
            "nome": "Rui Lincoln",
            "imagem": "imagens/ruiLincoln.png"
        },
        {
            "nome": "Naldo",
            "imagem": "imagens/naldo.png"
        },
        {
            "nome": "Matheus Edu",
            "imagem": "imagens/matheusedu.png"
        },
        {
            "nome": "Joao Carlos",
            "imagem": "imagens/joaocarlos.png"
        },
        {
            "nome": "Victor Marques",
            "imagem": "imagens/default.png"
        },
        {
            "nome": "Victor Fontebasso",
            "imagem": "imagens/default.png"
        },
        {
            "nome": "Caio",
            "imagem": "imagens/default.png"
        },
        {
            "nome": "Igor",
            "imagem": "imagens/default.png"
        }
    ];

    function jogadoresTextArea() {
        const listaJogadores = document.getElementById('listaJogadores').value;
        const nomes = listaJogadores.trim().split('\n');
        jsonDataTextArea = [];

        for (const nome of nomes) {
            if (nome === ''){
                continue
            }
            const jogador = jsonData.find(player => player.nome.toLowerCase() === nome.toLowerCase());
            if (jogador) {
                jsonDataTextArea.push({
                    nome: nome,
                    imagem: jogador.imagem
                });

            } else {
                jsonDataTextArea.push({
                    nome: nome,
                    imagem: 'imagens/default.png'
                });
            }


        }
        sortearTimes(jsonDataTextArea);
    }

    function sortearOrdemAleatoria(array) {
        const newArray = array.slice(); // Clonar o array para não alterar o original
        for (let i = newArray.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
        }
        return newArray;
    }

    function recriarDiv() {
        const novaDiv = document.createElement('div');
        novaDiv.className = 'row';
        novaDiv.id = 'teamsContainer';

        // Aqui você pode adicionar os novos elementos à novaDiv
        for (let i = 0; i < jsonData.length; i++) {
            const member = jsonData[i];
            const memberCard = document.createElement('div');
            // ... (criar elementos internos, como imagem e nome)
            novaDiv.appendChild(memberCard);
        }

        // Substituir a div antiga pela nova
        teamsContainer.parentNode.replaceChild(novaDiv, teamsContainer);
    }

    function sortearTimesAgora(jsonPlayers) {
        sortearTimes(jsonData)
    }

    function sortearTimes(jsonPlayers) {
        recriarDiv();

        const ordemAleatoria = sortearOrdemAleatoria(jsonPlayers);

        const teamsContainer = document.getElementById('teamsContainer');

        let rowDiv;
        for (let i = 0; i < ordemAleatoria.length; i++) {
            if (i % 5 === 0) {
                if (rowDiv) {
                    teamsContainer.appendChild(rowDiv);
                }

                rowDiv = document.createElement('div');
                rowDiv.className = 'row mb-4 col-md-12 center-images';

                const timeNumber = document.createElement('div');
                timeNumber.className = 'col-md-12 text-center h4';
                timeNumber.textContent = 'Time ' + (i / 5 + 1);

                rowDiv.appendChild(timeNumber);
            }

            const member = ordemAleatoria[i];

            const memberCard = document.createElement('div');
            memberCard.className = 'col-md-2';

            const card = document.createElement('div');
            card.className = 'd-flex justify-content-center align-items-center card text-center';

            const image = document.createElement('img');
            image.src = member.imagem;
            image.alt = member.nome + "'s Image";
            image.className = 'card-img-top';
            image.style.width = '100px';
            image.style.height = '100px';
            image.style.marginTop = '10px';

            const cardBody = document.createElement('div');
            cardBody.className = 'card-body';

            const name = document.createElement('h5');
            name.className = 'card-title';
            name.textContent = member.nome;

            cardBody.appendChild(name);
            card.appendChild(image);
            card.appendChild(cardBody);
            memberCard.appendChild(card);

            rowDiv.appendChild(memberCard);

            if (i === ordemAleatoria.length - 1) {
                teamsContainer.appendChild(rowDiv);
            }
        }
    }
</script>
</body>
</html>
</body>
</html>
